<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Taekwondo Tracker</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f4f4f9; color:#333; overflow-x:hidden; }
h2 { margin-top:0; }
section { background:#fff; margin:20px auto; padding:20px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.05); max-width:95%; }
table { width:100%; border-collapse:collapse; margin-bottom:20px; table-layout:auto; word-wrap:break-word; }
.table-container { overflow-x:auto; width:100%; }
th,td { padding:10px; border:1px solid #ddd; text-align:left; font-size:14px; overflow-wrap: break-word; }
th { background:#e2e2f1; }
input[type="text"], input[type="number"], input[type="date"], select { width:95%; padding:6px; box-sizing:border-box; border-radius:4px; border:1px solid #ccc; }
input[type="checkbox"] { width:20px; height:20px; }
button { margin:5px; padding:8px 12px; border-radius:4px; border:none; background:#6c63ff; color:#fff; cursor:pointer; font-size:14px; }
button:hover { background:#534fd1; }
.control-panel { background:#e8e8f8; padding:20px; border-radius:8px; margin:20px auto; max-width:95%; display:flex; flex-wrap:wrap; gap:10px; justify-content:flex-start; }
.belt-White{background:#ffffff;}
.belt-White-Stripe{background:#f9f9f9;}
.belt-Yellow{background:#fffacd;}
.belt-Yellow-Stripe{background:#fff8b0;}
.belt-Green{background:#90ee90;}
.belt-Green-Stripe{background:#a0f0a0;}
.belt-Blue{background:#add8e6;}
.belt-Blue-Stripe{background:#b7dfee;}
.belt-Red{background:#ff7f7f;}
.belt-Red-Stripe{background:#ff9999;}
.belt-Black{background:#333333; color:#fff;}
.student-active{background:#e6ffe6;}
.status-counts { font-weight:bold; margin-bottom:10px; }
</style>
</head>
<body>

<h1 style="text-align:center; background:#222; color:#fff; padding:15px 0; margin:0; border-bottom:4px solid #ffcc00;">Impact Martial Arts Belt Tracker</h1>

<section id="studentsSection">
  <h2>Students</h2>
  <div class="status-counts" id="studentStatusCounts"></div>
  <div class="table-container">
    <table id="studentsTable">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Birthdate</th>
          <th>Age</th>
          <th>Belt</th>
          <th>Instructor</th>
          <th>Location</th>
          <th>Eligible</th>
          <th>Active</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <button onclick="openStudentModal()">Add Student</button>
</section>

<section id="beltTestsSection">
  <h2>Belt Tests</h2>
  <div class="status-counts" id="eligibleStatusCount"></div>
  <div class="table-container">
    <table id="beltTestsTable">
      <thead>
        <tr>
          <th>Student</th>
          <th>Belt</th>
          <th>Date</th>
          <th>Instructor(s)</th>
          <th>Location</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <button onclick="openTestModal()">Add Belt Test</button>
</section>

<!-- Modals for Student/Test omitted for brevity (same as before) -->

<script>
// DATA
let students=[], beltTests=[], nextStudentId=1000;

// UPDATE STATUS COUNTS
function updateStatusCounts() {
    const activeCount = students.filter(s => s.active).length;
    const inactiveCount = students.filter(s => !s.active).length;
    const eligibleCount = students.filter(s => s.active && s.eligible).length;
    document.getElementById('studentStatusCounts').innerText = `Active: ${activeCount}, Inactive: ${inactiveCount}`;
    document.getElementById('eligibleStatusCount').innerText = `Eligible (active only): ${eligibleCount}`;
}

// CALCULATE AGE
function calculateAge(birthdate) {
    if(!birthdate) return '';
    const dob = new Date(birthdate);
    const diff = new Date() - dob;
    return Math.floor(diff / (1000*60*60*24*365.25));
}

// POPULATE STUDENT TABLE
function populateStudentsTable() {
    const tbody = document.querySelector('#studentsTable tbody');
    tbody.innerHTML='';
    students.forEach(s=>{
        const row=document.createElement('tr');
        if(s.active) row.classList.add('student-active');
        row.innerHTML=`
            <td>${s.id}</td>
            <td>${s.name}</td>
            <td>${s.birthdate}</td>
            <td>${calculateAge(s.birthdate)}</td>
            <td>${s.belt}</td>
            <td>${s.instructor}</td>
            <td>${s.location}</td>
            <td>${s.eligible?'✔':''}</td>
            <td>${s.active?'✔':''}</td>
            <td>
              <button onclick="editStudent(${s.id})">Edit</button>
              <button onclick="deleteStudent(${s.id})">Delete</button>
            </td>
        `;
        tbody.appendChild(row);
    });
    updateStatusCounts();
}

// POPULATE BELT TEST TABLE (same logic)
function populateBeltTestsTable() {
    const tbody = document.querySelector('#beltTestsTable tbody');
    tbody.innerHTML='';
    beltTests.forEach(t=>{
        const student = students.find(s=>s.id===t.studentId);
        const studentName = student ? `${student.name} (${student.id})` : 'Unknown';
        const row=document.createElement('tr');
        row.innerHTML=`
            <td>${studentName}</td>
            <td>${t.belt}</td>
            <td>${t.date}</td>
            <td>${t.instructors.join(',')}</td>
            <td>${t.location}</td>
            <td>
              <button onclick="editTest(${t.id})">Edit</button>
              <button onclick="deleteTest(${t.id})">Delete</button>
            </td>
        `;
        tbody.appendChild(row);
    });
    updateStatusCounts();
}

// Example: Adding a student
function addStudent(name, birthdate, belt, instructor, location, eligible, active) {
    students.push({id:nextStudentId++, name, birthdate, belt, instructor, location, eligible, active});
    populateStudentsTable();
    populateBeltTestsTable();
}

// Initial population (if any)
populateStudentsTable();
populateBeltTestsTable();
</script>
</body>
</html>